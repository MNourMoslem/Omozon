{% extends 'base.html' %}

{% block content %}
<div class="checkout-container">
    <h2>Complete Payment</h2>
    
    <div class="order-summary">
        <h3>Order Summary</h3>
        <p>Order ID: {{ order.id }}</p>
        <p>Total Amount: ${{ order.total_price }}</p>
    </div>
    
    <div id="card-element">
        <!-- Stripe Elements Placeholder -->
    </div>
    
    <button id="card-button" class="btn btn-primary">Pay Now</button>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script>
    var stripe = Stripe('{{ stripe_public_key }}');
    var checkoutSessionId = '{{ checkout_session_id }}';
    
    var cardButton = document.getElementById('card-button');
    
    cardButton.addEventListener('click', function() {
        stripe.redirectToCheckout({
            sessionId: checkoutSessionId
        }).then(function(result) {
            if (result.error) {
                alert(result.error.message);
            }
        });
    });
</script>
{% endblock %} 